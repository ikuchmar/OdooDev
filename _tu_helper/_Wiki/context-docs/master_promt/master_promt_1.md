Ты — инженер, который должен С СОХРАНЕНИЕМ ВСЕГО ФУНКЦИОНАЛА собрать локальную систему контекстной документации для
PyCharm на Python. Нужны исходники, чтобы я мог скачать/запустить.

# Цель
Ты — Python-разработчик, который пишет утилиту для просмотра документации в формате Markdown с расширенным поиском.  
Твоя задача — сгенерировать полностью готовый **самодостаточный скрипт** на Python (один .py файл), который:

Сделать инструмент (External Tool в PyCharm), который по выделенному слову показывает мою локальную документацию из
Markdown‑файлов, позволяет навигироваться по категориям/файлам, копировать кодовые шаблоны и быстро возвращаться к
просмотренным разделам. Документация хранится в Git (папка docs/).

# Результат

Создай проект и выдай ссылки на скачивание:

- Папка проекта: `context-docs-pack/`
- Внутри:
    - `tools/open_doc.py` — ГЛАВНЫЙ СКРИПТ (см. требования ниже)
    - `docs/` — набор
      тестовых `.md`: `html.md`, `css.md`, `js.md`, `python.md`, `odoo.md`, `pycharm.md`, `pgadmin.md`, `github.md`, `md.md`, `sql.md`
    - `README.md` — правила оформления `.md` (см. ниже)

Если окружение поддерживает файлы — сгенерируй их и дай ссылки (или zip). Если нет — выведи полный текст каждого файла.

# Требования к open_doc.py (Python 3.8+, стандартная библиотека)

1) **Запуск**: скрипт вызывается из PyCharm External Tool с 1 аргументом — `$SelectedText$` (может быть пустым). При
   пустом — просто открыть окно.
2) **Поиск**:
    - Ищет по КЛЮЧУ секции (см. формат `.md` ниже), регистр не важен.
    - Если точного совпадения нет — показать ближайшее (fuzzy, 1 совпадение).
    - Вверху окна создать панель в ТАКОМ порядке:  
      `Label("Поиск по ключу:")` → `Entry` → кнопки `◀` (назад), `▶` (вперёд), `Искать`, **`Найти в дереве`**.
    - **Entry ОБЯЗАТЕЛЬНО предзаполнить** значением `initial_term` (взятым из `sys.argv[1]`, если есть).
    - **Если `initial_term` непустой — СРАЗУ вызвать `do_search()`**.
    - Вести **историю** открытий (кнопки ◀/▶ перемещают по секциям).
3) **Источник данных**:
    - Корень документации: `docs/` (расположена на уровень выше скрипта: `Path(__file__).parent.parent/"docs"`).
    - Рекурсивный обход всех подпапок.
    - Игнорировать каталоги: `site`, `node_modules`, `.git`, `.venv`, `venv`, `__pycache__`.
4) **Парсинг Markdown секций**:
    - Секция начинается с строки вида `## ключ`.
    - Первая НЕпустая и НЕразделительная строка после заголовка — это **иерархия категорий
      **: `Кат1 - Кат2 - ... - КатN` (разделитель строго ` пробел-тире-пробел `). Кол-во уровней не ограничено.
    - Далее — произвольный markdown до следующего `##`.
    - **Разделительные линии** разрешены и должны игнорироваться: любая строка из `===...` или `---...` длиной ≥3. Они
      могут стоять до/после `## ключ`, а также сразу после строки категорий.
    - Внутри секции может быть **несколько код‑блоков** в ограждениях тройными бэктиками ```…```. Извлечь ВСЕ (
      содержимое без ограждений), сохранить порядок.
5) **UI (tkinter) — ОБЯЗАТЕЛЬНАЯ компоновка**:
    - Слева — вкладки `Категории` и `Файлы`.
    - **Справа — ДВА вертикальных блока, оба ВСЕГДА видимы:**
        - **Верхний**: `ScrolledText` (read‑only) с ПОЛНЫМ markdown текущей секции (включая строку `## ключ`, но **без**
          строки категорий). Использовать `pack(fill="both", expand=True)`. **НЕЛЬЗЯ** скрывать или объединять с
          код‑полем.
        - **Нижний**: панель для кода — сверху `Combobox` («Блок 1», «Блок 2», …; если нет кодов — «— нет кода —»),
          ниже `ScrolledText` (read‑only) с текстом выбранного код‑блока.
    - Кнопки внизу справа: `Скопировать весь блок`, `Скопировать код`, `Открыть .md`, `Закрыть`.
    - Кнопка **`Найти в дереве`** ДОЛЖНА вызывать функцию позиционирования (см. ниже).
6) **Деревья**:
    - Вкладка **Категории**: построить дерево по строке категорий (без верхнего фиктивного узла «Категории»; корневые
      категории — сразу в корне).
    - Вкладка **Файлы**: отразить реальную файловую структуру `docs/…/file.md → § секции`.
    - Двойной клик/Enter по узлу **§ секция** — открыть её справа.
7) **Позиционирование по текущей секции**:
    - Реализовать `focus_current_in_trees()` и повесить её на кнопку **«Найти в дереве»**.
    - Функция должна **развернуть и сфокусировать** соответствующий §‑узел **в обоих деревьях** (Категории и Файлы).
8) **Копирование**:
    - `Скопировать весь блок` — копирует весь markdown секции (включая строку `## ключ`, но без строки категорий).
    - `Скопировать код` — копирует выбранный код‑блок из Combobox (пустая строка, если кодов нет).
    - Буфер обмена — системный (tkinter).
9) **Дубликаты ключей**:
    - В глобальном поиске по ключу брать **первое** совпадение.
    - При клике в дереве всегда открывать **конкретную** секцию того файла, откуда кликнули.
10) **Надёжность**:
- Все файлы читать как UTF‑8.
- Только стандартная библиотека (tkinter, pathlib, difflib, webbrowser, re).
- Работает на Windows/Mac/Linux.

# Требования к формату `.md`

Для каждой секции:

- Заголовок: `## ключ` (идентификатор для поиска; желательно уникальный в пределах файла).
- Следующая НЕпустая и НЕразделительная строка — иерархия категорий: `Кат1 - Кат2 - ...` (разделитель строго ` - `).
- Далее — произвольный markdown + ноль/один/несколько код‑блоков ```…``` (c указанием языка).
- Разделители `===...` и `---...` разрешены (необязательны), длина любая ≥3, игнорируются парсером.

Пример секции:
==========================
## img
==========================
HTML - Базовые теги - Изображения
--------------------------------------------
Краткое описание…

```html
<img src="photo.jpg" alt="Описание">
css
Copy
Edit
img { max-width: 100%; }
Стартовые тестовые файлы
Создай docs/ с примерами: html.md, css.md, js.md, python.md, odoo.md, pycharm.md, pgadmin.md, github.md, md.md, sql.md.
В каждом — минимум по 2 секции, часть с разделителями, часть — без. Покрыть кейсы:

несколько код‑блоков;

глубокие категории (3–4 уровня);

разные языки кода.

README.md
В корне проекта добавь README.md с краткими правилами разметки (см. требования выше), чтобы авторам было просто создавать новые файлы.

Интеграция с PyCharm
Приведи инструкцию:

Settings → Tools → External Tools → +

Name: Open Doc

Program: python (или путь к интерпретатору)

Arguments: "<путь>/tools/open_doc.py" $SelectedText$

Working directory: "<путь>/"

Settings → Keymap → External Tools → Open Doc → Add Keyboard Shortcut (например, Ctrl+Shift+D).

Критерии приёмки
В верхней панели присутствуют: Label, Entry (предзаполнен initial_term), кнопки ◀, ▶, Искать, Найти в дереве.

При непустом initial_term окно открывается уже с загруженной секцией (автовызов do_search()).

Справа видны оба блока: верхний — полный markdown секции, нижний — код‑панель с Combobox.

В Combobox доступны все код‑блоки секции.

Кнопки «Скопировать…» и «Открыть .md» работают.

Вкладка «Категории» строится из строки категорий (без верхнего фиктивного узла); вкладка «Файлы» отражает структуру диска.

Кнопки ◀/▶ перемещают по истории открытий; «Найти в дереве» позиционирует оба дерева на текущую секцию.

Разделители ===/--- необязательны и игнорируются; количество уровней категорий не ограничено.

Что от тебя жду в ответе
Сгенерируй все файлы проекта (желательно дать ссылку на ZIP и/или отдельные ссылки).

Покажи полностью исходник tools/open_doc.py.

Приложи быструю инструкцию по подключению в PyCharm.

Коротко опиши, как добавить новые .md и категории.

Сделай всё сразу, без дополнительных вопросов.