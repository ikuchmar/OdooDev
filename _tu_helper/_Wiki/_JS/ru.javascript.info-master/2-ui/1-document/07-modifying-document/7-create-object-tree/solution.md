Самый лёгкий способ -- это использовать рекурсию.

1. [Решение с innerHTML](sandbox:innerhtml).
2. [Решение через DOM](sandbox:build-tree-dom).
